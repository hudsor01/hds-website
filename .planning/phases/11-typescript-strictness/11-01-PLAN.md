---
phase: 11-typescript-strictness
plan: 01
type: execute
---

<objective>
Enable TypeScript strict unused checks and fix all resulting errors.

Purpose: Catch unused variables and parameters at compile time, preventing code clutter and potential bugs. Addresses CODE_REVIEW items #6 and #17.
Output: tsconfig.json with noUnusedLocals and noUnusedParameters enabled, zero TypeScript errors.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Discovery (Level 0 - internal refactoring):**

Enabling `noUnusedLocals: true` and `noUnusedParameters: true` produces exactly 3 errors:

1. `src/app/api/admin/errors/[fingerprint]/route.ts:22` - `request` parameter unused in `handleErrorDetail`
2. `src/app/api/admin/leads/[id]/notes/route.ts:25` - `request` parameter unused in `handleLeadNotesGet`
3. `src/app/api/testimonials/[id]/route.ts:64` - `request` parameter unused in `handleDeleteTestimonial`

All three are Next.js API route handlers where the `request: NextRequest` parameter is required by the framework signature but not used in the function body. The standard fix is to prefix with underscore: `_request`.

**Current state:**
- TypeScript: 0 errors with current config
- ESLint: 0 errors, 0 warnings
- `noUnusedLocals: false`, `noUnusedParameters: false` in tsconfig.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Enable strict unused checks in tsconfig.json</name>
  <files>tsconfig.json</files>
  <action>
Change two settings in tsconfig.json compilerOptions:
- `"noUnusedLocals": false` -> `"noUnusedLocals": true`
- `"noUnusedParameters": false` -> `"noUnusedParameters": true`

Do NOT change any other settings. Do NOT add noImplicitOverride or noPropertyAccessFromIndexSignature (those are intentionally false per prior decisions).
  </action>
  <verify>grep -E "noUnused" tsconfig.json shows both set to true</verify>
  <done>Both noUnusedLocals and noUnusedParameters are true in tsconfig.json</done>
</task>

<task type="auto">
  <name>Task 2: Fix unused parameter errors in API route handlers</name>
  <files>
src/app/api/admin/errors/[fingerprint]/route.ts,
src/app/api/admin/leads/[id]/notes/route.ts,
src/app/api/testimonials/[id]/route.ts
  </files>
  <action>
In each file, prefix the unused `request` parameter with underscore to indicate intentional non-use:

1. `src/app/api/admin/errors/[fingerprint]/route.ts:22` - Change `request: NextRequest` to `_request: NextRequest` in `handleErrorDetail` function signature
2. `src/app/api/admin/leads/[id]/notes/route.ts:25` - Change `request: NextRequest` to `_request: NextRequest` in `handleLeadNotesGet` function signature
3. `src/app/api/testimonials/[id]/route.ts:64` - Change `request: NextRequest` to `_request: NextRequest` in `handleDeleteTestimonial` function signature

Do NOT use eslint-disable comments (project rule: no eslint-disable directives).
Do NOT remove the parameter entirely (Next.js requires the positional parameter for the `context` second arg to work).
  </action>
  <verify>npx tsc --noEmit exits with code 0 (zero errors)</verify>
  <done>TypeScript compiles cleanly with strict unused checks enabled, zero errors</done>
</task>

<task type="auto">
  <name>Task 3: Verify no regressions</name>
  <files>none (verification only)</files>
  <action>
Run the full validation suite to confirm no regressions:
1. TypeScript: `npx tsc --noEmit` (must pass with 0 errors)
2. ESLint: `npx eslint .` (must pass with 0 errors, 0 warnings)
3. Unit tests: `bun test tests/` (all must pass)
  </action>
  <verify>All three commands exit with code 0</verify>
  <done>TypeScript strict unused checks enabled with zero errors, zero lint issues, all tests passing</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npx tsc --noEmit` passes (0 errors)
- [ ] `npx eslint .` passes (0 errors, 0 warnings)
- [ ] `bun test tests/` passes (all tests green)
- [ ] tsconfig.json has noUnusedLocals: true and noUnusedParameters: true
</verification>

<success_criteria>

- noUnusedLocals and noUnusedParameters both enabled in tsconfig.json
- Zero TypeScript errors
- Zero ESLint errors or warnings
- All unit tests passing
- No eslint-disable comments added
</success_criteria>

<output>
After completion, create `.planning/phases/11-typescript-strictness/11-01-SUMMARY.md`
</output>
