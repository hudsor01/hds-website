# Hudson Digital Solutions Website

## What This Is

A production Next.js 16 business website with tool generators (paystub, invoice, contract, proposal), TTL calculator, contact forms, blog, and comprehensive testing. Cleaned and optimized in v1.0, now undergoing code review remediation in v1.1.

## Core Value

Working tools and contact form stay functional while the codebase achieves production-grade quality: strict types, comprehensive test coverage, proper error handling, and optimized performance.

## Requirements

### Validated

- Contact form with email delivery (Resend integration) -- v1.0
- Tool pages: paystub, invoice, contract, proposal generators -- v1.0
- Next.js 16 App Router with React Server Components -- v1.0
- TypeScript strict mode for type safety -- v1.0
- Tailwind CSS utility-first styling -- v1.0
- PDF generation capability (Puppeteer + Stirling) -- v1.0
- Server Actions for form processing -- v1.0
- Vercel deployment configuration -- v1.0
- Dependency reduction (130+ to 72 packages) -- v1.0
- Component reorganization (forms/, utilities/, calculators/) -- v1.0
- Comprehensive .env.example template -- v1.0
- 334 passing unit tests, 0 TypeScript errors, 0 lint warnings -- v1.0

### Active

- [ ] Enable noUnusedLocals/noUnusedParameters in TypeScript (CODE_REVIEW #17)
- [ ] Standardize import patterns to @/ absolute paths (CODE_REVIEW #18)
- [ ] Increase test coverage for analytics.ts, attribution.ts (CODE_REVIEW #8)
- [ ] Fix Playwright hardcoded port (CODE_REVIEW #9)
- [ ] Add error boundaries around major features (CODE_REVIEW #12)
- [ ] Audit input validation gaps in forms (CODE_REVIEW #15)
- [ ] Document rate limiting configuration (CODE_REVIEW #16)
- [ ] Code splitting for heavy libraries (CODE_REVIEW #13)
- [ ] Audit server/client component boundaries (CODE_REVIEW #10)
- [ ] Evaluate provider stack necessity (CODE_REVIEW #11)
- [ ] Extract homepage into smaller components (CODE_REVIEW #5)

### Out of Scope

- Changing core framework (Next.js 16, React 19) -- constraint
- Splitting database.ts (auto-generated by Supabase, 6,286 lines) -- not practical
- Adding JSDoc to unchanged code -- contradicts CLAUDE.md
- Creating architecture documentation proactively -- contradicts CLAUDE.md
- Adding new features -- code review remediation only
- Mobile app or native -- web-first
- Rewriting working code that's already clean -- don't fix what isn't broken

## Context

**Current Codebase State (post v1.0):**
- 72 npm dependencies (down from 130+)
- 334 passing unit tests
- 0 TypeScript errors, 0 lint errors, 0 lint warnings
- Component directories: forms/, utilities/, calculators/, ui/, layout/
- Drizzle ORM + Neon for production database
- Supabase types for legacy compatibility

**Technical Debt:**
- analytics.ts and attribution.ts at 0% test coverage
- Playwright config hardcodes port 3001
- noUnusedLocals/noUnusedParameters disabled in tsconfig
- Some relative imports in src/ (17 instances)
- Homepage at 507 lines (could be extracted)
- @react-pdf/renderer incompatible with Turbopack

## Constraints

- **Tech Stack**: Next.js 16 + React 19 (no framework changes)
- **Type Safety**: TypeScript strict mode non-negotiable
- **URL Stability**: Tool pages at current paths (no breaking routes)
- **Deployment**: Vercel configuration preserved
- **Feature Parity**: Zero regression on working features
- **CLAUDE.md**: All changes must comply with project coding standards

## Key Decisions

| Decision | Rationale | Outcome |
|----------|-----------|---------|
| Aggressive dependency pruning | 130+ packages, many unused | Good -- 72 packages, zero regressions |
| Remove Supabase auth middleware | Not actively used | Good -- simplified codebase |
| Standardize TanStack ecosystem | Consistent data/form handling | Good -- Query + Form + nuqs |
| Keep database.ts as-is | Auto-generated, splitting impractical | Practical -- avoid maintenance burden |
| Skip JSDoc/architecture docs | Contradicts CLAUDE.md guidelines | Intentional -- respect project standards |
| Group CODE_REVIEW into 6 phases | Logical dependencies, manageable scope | Pending -- v1.1 execution |

---
*Last updated: 2026-01-30 after v1.0 milestone*
